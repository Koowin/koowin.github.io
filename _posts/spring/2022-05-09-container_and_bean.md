---
title:  "스프링 컨테이너와 빈"

toc: true
toc_label: "Contents"
toc_icon: "bars"
toc_sticky: true

categories:
  - spring

date: 2022-05-09
last_modified_at: 2022-05-09
sitemap:
  changefreq: daily
  priority: 1.0
---

# 개요

앞서 IoC와 DI에 대해 다루었습니다. OCP, DIP 를 지키기 위해서 사용 영역과 구성 영역을 구분할 필요가 생겼습니다. Spring 프레임워크가 구성 영역을 담당하고, 개발자는 사용 영역에만 집중하면 됩니다. (어떻게 구성할 것인지 간단한 구성 정보는 스프링에게 제공해야합니다)

Spring이 구성 작업을 하기 위해 사용하는 것이 컨테이너와 빈 입니다. 이번 포스팅에서 컨테이너와 빈에 대해 간략히 소개하겠습니다.



# 스프링 컨테이너

앞선 포스팅에서 의존관계 주입을 위해 스프링 컨테이너가 필요하다고 말씀드렸습니다.



IoC, DI 포스팅에서 사용하였던 예시를 한 번 더 사용하겠습니다.

Drive 클래스에서 사용하는 car 는 Drive 의 생성자에서 의존성 주입을 통해 주입 받습니다.

여기에 주입할 자동차는 Sedan과 Truck 2가지 선택지가 있었습니다. 개발자는 Truck 을 주입하기로 결정하였습니다.



이렇게 Drive 에 Truck 을 주입한다. 라는 것을 구성 정보라고 합니다. 스프링 컨테이너를 생성하기 위해서는 이러한 구성 정보가 필요합니다.

컨테이너 생성을 위한 구성 정보를 지정해주는 방법은 여러가지가 있습니다.

대표적으로 `에너테이션 + 자바 클래스` 혹은 `XML 기반`으로 구성 정보를 지정해주는 방법 등이 있습니다.

이 포스팅에서는 에너테이션과 자바 클래스를 이용한 방법에 대해서만 설명하겠습니다.



## 에너테이션과 자바 클래스를 이용한 방법

예제로 설명드리겠습니다.

```java
@Configuration
public class AppConfig {
  @Bean
  public Drive drive(){
    return new Drive(carOperation());
  }
  
  @Bean
  public CarOperation carOperation(){
    return new Truck();
  }
}
```



@Configuration 에너테이션을 이용하여 스프링에게 '이 구성 정보를 사용해서 컨테이너를 만들어줘.' 라는 것을 명시합니다.

carOperation() 에서 Truck() 을 반환하고, drive() 에서 반환받은 Truck 을 주입해주는 것을 확인할 수 있습니다.



이와 같이 아주 간단하게 구성 정보를 지정할 수 있습니다.

그런데, @Bean 에너테이션은 무엇일까요?

# 스프링 빈

컨테이너에 등록할 객체들을 `스프링 빈`이라고 합니다. 컨테이너를 생성하여 @Bean 에너테이션이 붙은 객체들을 컨테이너에 먼저 등록합니다. 그 후 의존관계를 주입해주는 과정을 거칩니다.



`빈`의 이름을 명시하는 방법, 컨테이너에 등록된 빈을 조회하는 방법 등 조금 더 깊은 내용은 다음에 포스팅하도록 하겠습니다.

# 출처

* 스프링 핵심 원리 기본편 (김영한, 인프런)